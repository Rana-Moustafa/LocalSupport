<div class="map-adjust"></div>

<div class="map-filters">
  <div class="container">
    <div class="map-filters__search">
     
      <div class="form-group">
        <input type="text" class="form-control" (keydown.enter)="searchPlaces()"
          [placeholder]="'Search_nearest_location'| translate" autocorrect="on" autocapitalize="off" spellcheck="on"
          type="text" #search>
        <button (click)="setCurrentLocation(latitude,longitude)"
          class="map-filters__search__near">{{"Near_me" | translate}}</button>
        <a class="map-filters__search__action" (click)="searchPlaces()">
          <img src="../../../assets/images/ic-location-light.svg" />
        </a>
      </div>
    </div>

    
  </div>
</div>
<agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [styles]="styles" [zoomControlOptions]="zoomControlOptions"
  [streetViewControl]="streetViewControl"  [scrollwheel]="false" #AgmMap
  [fitBounds]="fitBoundsMarkers">
  <agm-marker [latitude]="latitude" [longitude]="longitude" [iconUrl]="currentMarkerIcon"></agm-marker>
  <agm-marker *ngFor="let m of markers; let i = index" [latitude]="m.lat" [longitude]="m.lng" [iconUrl]="markerIcon"
    (markerClick)="clickedMarker(infowindow)" [agmFitBounds]="fitBoundsMarkers">

    <agm-info-window [disableAutoPan]="true" #infowindow [maxWidth]="250" class="marker-popup">
      <a [routerLink]="['/'+langURL, 'single-place', m.id, m.slug]" class="place-name-link">
        <h4 style="z-index: 9999999999; position: relative;" [innerHTML]="m.title"></h4>
      </a>
      <!-- <div class="rating">
        <i class="fa fa-star" [ngClass]="{'star-empty': (m.rating | number:'1.0-0') < 1}"></i>
        <i class="fa fa-star" [ngClass]="{'star-empty': (m.rating | number:'1.0-0') < 2}"></i>
        <i class="fa fa-star" [ngClass]="{'star-empty': (m.rating | number:'1.0-0') < 3}"></i>
        <i class="fa fa-star" [ngClass]="{'star-empty': (m.rating | number:'1.0-0') < 4}"></i>
        <i class="fa fa-star" [ngClass]="{'star-empty': (m.rating | number:'1.0-0') < 5}"></i>
      </div> -->
      <div *ngIf="markers && m.categories; first as isFirst">
        <span *ngFor="let category of m.categories" class="badge"> 
          {{category}} 
        </span>
      </div>
    </agm-info-window>
  </agm-marker>
</agm-map>
<!-- <h5>Address: {{address}}</h5>
<div>Latitude: {{latitude}}</div>
<div>Longitude: {{longitude}}</div> -->