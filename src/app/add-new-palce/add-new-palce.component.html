<div *ngIf="isLoading" class="loading-spinner">
  <app-loading-spinner></app-loading-spinner>
</div>

<div class="c_add_place__Header-section">
</div>
<div class="c_add_place__content-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="c_add_place_content">
          <form (ngSubmit)="newPlace(addPlace)" name="addPlace" #addPlace="ngForm">
            <div class="c-activities_section">
              <h1>Registration Vendor</h1>
              <!-- <div class="c-activities_section__right">
                <h3>
                  {{"what_you_can_do_here" | translate}}
                </h3>
                <div class="c-activities_section__icons">
                  <ul class="radio-images">
                    <li *ngFor="let activity of activities;  let i = index;">
                      <div class="form-group">
                        <label class="{{activity.name}}-checkbox">
                          <input type="checkbox" value="{{i}}">
                          <span>
                            <img [src]="activity.in_active_icon" alt="" class="img-thumbnail icon_inactive">
                            <img [src]="activity.active_icon" alt="" class="img-thumbnail icon_active">
                          </span>
                        </label>
                      </div>
                      <small>{{activity.name}}</small>
                    </li>
                  </ul>
                </div>
              </div> -->
              <div class="c-activities_section_left">
              
                <!-- <button class="Addnew-btn" type="submit" class="btn btn-primary" >
                  {{"Addplace" | translate}}
                </button> -->
              </div>
            </div>
            <p class="help-block" *ngIf="addPlaceFormError && addPlace.submitted"> {{ formErrorMsg }} </p>
            <!-- start -->
            <div class="form-group">
              <h4 class="subtitle">{{"give_it_a_name" | translate}} (*):</h4>
              <div class="form-group">
                <input type="text" class="form-control col-12" ngModel name="placename" #placename="ngModel" required>
                <small class="help-block"
                  *ngIf="!placename.valid && placename.touched && placename.errors.required">{{'field_requird'  | translate }}</small>
              </div>
            </div>
            <!-- end -->
            <!-- start -->
            <div class="form-group">
              <h4 class="subtitle">{{"Address" | translate}} (*):</h4>
              <div class="map-filters__search">
                <div class="form-group">
                  <input type="text" class="form-control search-btn" (keydown.enter)="$event.preventDefault()"
                    placeholder="Search Nearest Location" autocorrect="off" autocapitalize="off" spellcheck="off"
                    type="text" #search ngModel name="address" #address="ngModel" required>
                  <p class="help-block" *ngIf="!address.valid && address.touched && address.errors.required">
                  {{'field_requird'  | translate }}</p>
                  <p class="help-block" *ngIf="address.touched && !latitude && !longitude">You must choose the
                    address from the autocomplete list above!</p>
                </div>
              </div>
            </div>
            <!-- end -->
            <!-- start -->
            <div class="form-group">
              <h4 class="subtitle">{{"phone" |translate}}</h4>
              <div class="form-group">
                <input type="text" class="form-control col-12" ngModel name="phone" #phone="ngModel" pattern="[0-9]+">
                <p class="help-block" *ngIf="!phone.valid && phone.touched && phone.errors.pattern">Please enter a valid
                  phone number.</p>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"Email" |translate}} (*)</h4>
              <div class="form-group">
                <input type="email" class="form-control col-12" ngModel name="placeemail" #placeemail="ngModel" required>
                <small class="help-block"
                  *ngIf="!placeemail.valid && placeemail.touched && placeemail.errors.required">{{'field_requird'  | translate }}</small>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"website" | translate}}</h4>
              <div class="form-group">
                <input type="url" class="form-control col-12" ngModel name="website" #website="ngModel"
                  pattern="^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}">
                <p class="help-block" *ngIf="!website.valid && website.touched && website.errors.pattern">
                  Please enter a valid url.
                </p>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"zipcode" |translate}}</h4>
              <div class="form-group">
                <input type="text" class="form-control col-12" ngModel name="zipcode" #zipcode="ngModel"
                  pattern="^[a-zA-Z0-9_]*$">
                <p class="help-block" *ngIf="!zipcode.valid && zipcode.touched && zipcode.errors.pattern">Please enter a
                  valid zipcode.</p>
              </div>
            </div>
            <!-- end -->
            <!-- start -->
            <div class="form-group">
              <h4 class="subtitle">{{"description" |translate}}  (Your Name, Your Product/Offer, etc...) (*)</h4>
              <div class="form-group">
                <textarea type="text" class="form-control col-12" ngModel name="description"
                  #description="ngModel" required></textarea>
                  <small class="help-block"
                  *ngIf="!description.valid && description.touched && description.errors.required">{{'field_requird'  | translate }}</small>
              </div>
            </div>
            <!-- end -->

            <!-- start -->
            <div class="form-group">
              <h4 class="subtitle">{{"type" | translate}} (*): </h4>
              <div class="checkbox_wrapper">
                <div class="form-half-width" *ngFor="let type of placesCategories; let i = index;">
                  <label class="form-check-label" for="category{{type.name}}">
                      <input class="form-check-input" type="checkbox" id="type{{type.name}}"
                    [(ngModel)]="placesCategories[i].checked"
                    name="{{type.name}}" (change)="checkPlayground($event, type.name)">
                    <span>{{type.name}}</span>  
                  </label>
                </div>
              </div>
            </div>
            <!-- end -->
            <!-- start -->
            <div class="form-group" *ngIf="showSubCategories">
              <h4 class="subtitle">{{"subCategory" |translate}} (*):</h4>
              <div class="form_wrapper radio-form">
                <p *ngFor='let subCat of subCategories; let i = index;'>
                  <input id="cat{{i}}" type="radio" class="custom-control-input" [value]="subCat" name="subcats" ngModel
                    #subcats="ngModel" required="showSubCategories">
                  <label class="custom-control-label" for="cat{{i}}">
                    {{subCat.name}}
                  </label>
                </p>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"category" |translate}} :</h4>
              <div class="checkbox_wrapper">
                <div class="form-half-width" *ngFor="let category of foods;  let i = index;">
                  <label class="form-check-label" for="{{category.name}}"> 
                   <input class="form-check-input" type="checkbox" name="{{category.name}}" id="{{category.name}}" ngModel
                   [(ngModel)]="foods[i].checked">
                   <span>{{ category.name }}</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"delivery" |translate}} (*) :</h4>
              <div class="checkbox_wrapper">
                <div class="form-half-width" *ngFor="let delivery of foods;  let i = index;">
                  <label class="form-check-label" for="{{delivery.name}}"> 
                   <input class="form-check-input" type="checkbox" name="{{delivery.name}}" id="{{delivery.name}}" ngModel
                   [(ngModel)]="foods[i].checked">
                   <span>{{ delivery.name }}</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="form-group">
              <h4 class="subtitle">{{"payment_method" | translate}} :</h4>
              <div class="checkbox_wrapper">
                <div class="form-half-width" *ngFor="let payment of foods;  let i = index;">
                  <label class="form-check-label" for="{{payment.name}}"> 
                   <input class="form-check-input" type="checkbox" name="{{payment.name}}" id="{{payment.name}}" ngModel
                   [(ngModel)]="foods[i].checked">
                   <span>{{ payment.name }}</span>
                  </label>
                </div>
              </div>
            </div>

            <div class="form-group hour ">
              <h4 class="subtitle">{{"Opening_hours" | translate}} :</h4>
              <div class="form_wrapper">
                <div class="form-half-width">

                  <div class="default-time-example">
                    <label>{{"from" |translate}}</label>
                    <input aria-label="default time" [ngxTimepicker]="toggleTimepickerFrom" [value]="'10:00 am'"
                      readonly>
                    <ngx-material-timepicker #toggleTimepickerFrom></ngx-material-timepicker>
                  </div>
                </div>
                <div class="form-half-width">
                  <div class="default-time-example">
                    <label>{{"to" |translate}}</label>
                    <input aria-label="default time" [ngxTimepicker]="toggleTimepickerTo" [value]="'10:00 pm'" readonly>
                    <ngx-material-timepicker #toggleTimepickerTo></ngx-material-timepicker>
                  </div>
                </div>
              </div>
            </div>

            <h5 [hidden]="!((featuredImageError && !noImages)|| featuredImageError)">
              {{"cover_image_select_msg" | translate}} (required):</h5>
            <small class="help-block" [hidden]="((featuredImageError && !noImages)|| !featuredImageError)">
              {{"cover_image_select_msg_error" | translate}}
            </small> 
            <div class="data-text">
              <div class="custom-control custom-radio radio-form" *ngFor='let url of imagesUrls; let i = index;'>
                <a (click)="removeImage(i)" class="remove-image"><i class="fa fa-trash"></i></a>
                <input id="image{{i}}" type="radio" class="custom-control-input" [value]="url" name="placesimages"
                  ngModel #placesimages="ngModel" (change)="selectedFeaturedImage(imagesNames[i], url)">
           
                <label class="custom-control-label" for="image{{i}}">
                  <img [src]="url" />
                </label>
                <p>{{ imagesNames[i] }}</p>
              </div>
            </div>
            <!--  <button type="submit" class="btn btn-primary" 
            [disabled]="!checkValid()">{{"Addplace" | translate}}</button> -->
            <h4 class="subtitle">{{"upload_images" | translate}} (*): </h4>

            <div class="form-group form-image">
              <a (click)="compressFile()" [ngClass]="maxNumber? 'upload-disabled': ''" [disabled]="maxNumber">
              <!-- <input type="file" accept="image/*" #file
              (change)="getFileDetails($event)"
              (click)="file.compressFile()"   
              [disabled]="maxNumber"
              required> -->
               
              <div class="input-content">
                <div class="input-content-wrapper">
                  <div class="img">
                    <img src="assets/images/camera-icon.svg" alt="">
                   
                  </div>
                  <span class="text" [hidden]="maxNumber">
                    {{"upload_image_msg" | translate}}
                    <!-- <a (click)="compressFile($event)">{{maxNumber}}  Upload and compress Image</a> -->
                  </span>
                  <span class="text" [hidden]="!maxNumber">{{"upload_image_error" | translate}}</span>
                </div>
              </div>
            </a>
            </div>

            <button class="Addnew-btn" type="submit" class="btn btn-primary"
            [disabled]="!addPlace.valid || (!latitude && !longitude) || (!checkValidImages()) ">
            {{"Addplace" | translate}}</button>
          </form>
        </div>
      </div>
      <!-- <input #fileUpload type="file" (click)="fileUpload.value = null" (change)="getFileDetails($event)" style="display:none"
      accept="image/*">
       -->
    </div>
  </div>
</div>